<template>
  <div ref="root">
    <div class="container_">

      <div class='point' v-show="activated && statusDefault" ref="point1">
        <div class="navigator" style="margin-top : 6px;">
          <img src='../static/gear.svg' alt=""/>
        </div>
      </div>

      <div class='point' v-show="activated && statusDefault" ref="point2">

        <div class="navigator" style="margin-top : 6px;">
          <img src='../static/geo.svg' alt=""/>
        </div>

        <div v-show="geoActivated">
          <div
            @click="$router.push('search')"
            class="geo-part"
            ref="Search"
          >

            <svg height="30" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg" class="geo-svg">
              <path class="geo-sprite"
                    d="M53.1 47.3L38.165 32.365C40.9282 28.1655 42.0349 23.0902 41.2709 18.1215C40.5069 13.1529 37.9265 8.64448 34.0293 5.46915C30.1321 2.29381 25.1953 0.677452 20.1748 0.933005C15.1542 1.18856 10.4071 3.29785 6.85246 6.85249C3.29782 10.4071 1.18853 15.1543 0.932974 20.1748C0.677421 25.1953 2.29378 30.1321 5.46912 34.0293C8.64445 37.9265 13.1529 40.5069 18.1215 41.2709C23.0901 42.035 28.1655 40.9282 32.365 38.165L47.3 53.1L53.1 47.3ZM8.15 21.2C8.15 18.619 8.91537 16.0959 10.3493 13.9498C11.7833 11.8038 13.8214 10.1311 16.206 9.1434C18.5906 8.15568 21.2145 7.89724 23.7459 8.40078C26.2774 8.90432 28.6027 10.1472 30.4277 11.9723C32.2528 13.7974 33.4957 16.1226 33.9992 18.6541C34.5028 21.1856 34.2444 23.8095 33.2566 26.194C32.2689 28.5786 30.5963 30.6168 28.4502 32.0507C26.3041 33.4847 23.781 34.25 21.2 34.25C17.7389 34.25 14.4196 32.8751 11.9723 30.4278C9.52491 27.9804 8.15 24.6611 8.15 21.2V21.2Z"
              />
            </svg>

            <div class="triangle" ref="triangle"></div>
            <span class="geo-title" style="left : 25px">Search</span>

          </div>
          <div
            class="geo-part"
            style="transform: translateY(-102px) translateX(120px);"
            @click="$router.push('/')"
            ref="Home"
          >

            <svg height="30" viewBox="0 0 48 38" fill="none" xmlns="http://www.w3.org/2000/svg" class="geo-svg">
              <path class='geo-sprite'
                    d="M16 0C15.7431 0.00408442 15.4976 0.106894 15.3145 0.287109C14.5875 0.588079 14 1.17087 14 2C13.9981 2.13251 14.0226 2.26407 14.072 2.38704C14.1214 2.51001 14.1948 2.62193 14.2878 2.7163C14.3809 2.81067 14.4918 2.88561 14.614 2.93676C14.7363 2.9879 14.8675 3.01424 15 3.01424C15.1325 3.01424 15.2637 2.9879 15.386 2.93676C15.5082 2.88561 15.6191 2.81067 15.7122 2.7163C15.8052 2.62193 15.8786 2.51001 15.928 2.38704C15.9774 2.26407 16.0019 2.13251 16 2V6V12C16 12.55 15.55 13 15 13C14.45 13 14 12.55 14 12V8.35547C12.264 9.53747 8.8382 11.0769 4.4082 9.08789C4.0452 8.92389 3.61336 8.99458 3.31836 9.26758C3.02436 9.54058 2.92259 9.96284 3.05859 10.3398C3.07841 10.393 4.64778 14.5358 9 16.2559V20.334C7.84729 20.7946 4.65013 21.7963 1.4668 20.1152C1.0788 19.9112 0.603968 19.982 0.292968 20.293C-0.0180318 20.603 -0.0897662 21.0788 0.115234 21.4668C0.256234 21.7338 3.652 28 11 28H37C44.348 28 47.7438 21.7338 47.8848 21.4668C48.0898 21.0798 48.018 20.603 47.707 20.293C47.396 19.983 46.9202 19.9112 46.5332 20.1152C43.3683 21.7867 40.1557 20.7891 39 20.332V16.2559C43.3522 14.5358 44.9204 10.393 44.9395 10.3398C45.0755 9.96584 44.9775 9.54644 44.6875 9.27344C44.3975 9.00044 43.9734 8.92408 43.6074 9.08008C39.1254 10.9981 35.73 9.5087 34.002 8.3457V12C34.002 12.55 33.552 13 33.002 13C32.452 13 32.002 12.55 32.002 12V3H32V2C31.9981 2.13251 32.0226 2.26407 32.072 2.38704C32.1214 2.51001 32.1948 2.62193 32.2878 2.7163C32.3809 2.81067 32.4918 2.88561 32.614 2.93676C32.7363 2.9879 32.8675 3.01424 33 3.01424C33.1325 3.01424 33.2637 2.9879 33.386 2.93676C33.5082 2.88561 33.6191 2.81067 33.7122 2.7163C33.8052 2.62193 33.8786 2.51001 33.928 2.38704C33.9774 2.26407 34.0019 2.13251 34 2C34 1.17087 33.4125 0.588079 32.6855 0.287109C32.5024 0.106894 32.2569 0.00408442 32 0C31.7431 0.00408442 31.4976 0.106894 31.3145 0.287109C30.5875 0.588079 30 1.17087 30 2V3H18V2C18 1.17087 17.4125 0.588079 16.6855 0.287109C16.5024 0.106894 16.2569 0.00408442 16 0V0ZM11 16.8125C11.6269 16.9231 12.2832 17 13 17H18V20H11V16.8125ZM37 16.8125V20H30V17H35C35.7168 17 36.3731 16.9231 37 16.8125ZM20 17H28V20H20V17ZM7 29.4141V37C7 37.552 7.447 38 8 38H40C40.553 38 41 37.552 41 37V29.4141C39.797 29.7731 38.472 30 37 30H30V36H18V30H11C9.528 30 8.203 29.7731 7 29.4141ZM20 30V32H28V30H20Z"
              />
            </svg>


            <span class="geo-title">Home</span>

          </div>
          <div
            class="geo-part"
            style="transform: translateY(-6px) translateX(120px)"
            @click="$router.push('society')"
            ref="Some"
          >

            <svg height="30" viewBox="0 0 422 330" xmlns="http://www.w3.org/2000/svg" class="geo-svg">
              <path class='geo-sprite' d="M143.146 251.172C156.562 245.582 184.813 235.606 208.377 228.081C211.344 227.135 214.268 226.189 217.063 225.329C217.45 225.2 217.794 225.114 218.181 224.985C220.89 224.168 223.556 223.351 225.964 222.62C228.114 221.932 228.415 221.846 228.415 212.945C228.415 211.139 228.243 209.29 227.899 207.441C227.684 206.28 227.34 205.119 227.039 204.001C226.867 203.356 226.738 202.711 226.566 202.066C226.265 201.12 225.878 200.217 225.534 199.271C224.588 196.734 223.556 194.24 222.481 191.961C221.664 190.284 220.847 188.306 220.03 186.113C219.772 185.425 219.514 184.608 219.256 183.877C218.697 182.329 218.138 180.781 217.622 179.061C217.364 178.201 217.149 177.298 216.934 176.395C216.461 174.718 215.988 173.041 215.601 171.321C215.214 169.601 214.956 167.924 214.655 166.204C214.483 165.301 214.268 164.398 214.182 163.495C212.763 161.861 211.129 159.582 209.495 156.572C209.28 156.185 209.108 155.755 208.893 155.325C208.549 154.637 208.205 153.992 207.861 153.261C207.345 152.143 206.872 150.939 206.356 149.692C206.313 149.606 206.27 149.52 206.227 149.391C205.754 148.101 205.238 146.682 204.765 145.22C204.722 145.091 204.679 145.005 204.636 144.876C204.163 143.414 203.733 141.78 203.26 140.103C203.217 139.974 203.174 139.845 203.131 139.716C202.658 137.867 202.228 135.932 201.798 133.868C201.454 132.105 201.153 130.514 200.938 129.009C200.895 128.665 200.852 128.364 200.809 128.063C200.637 126.902 200.508 125.827 200.379 124.795C200.336 124.451 200.336 124.15 200.293 123.806C200.207 122.946 200.164 122.086 200.121 121.312C200.121 120.882 200.121 120.452 200.121 120.065C200.121 119.506 200.121 118.947 200.164 118.431C200.207 117.872 200.207 117.27 200.293 116.754C200.336 116.496 200.336 116.238 200.379 115.98C200.465 115.292 200.551 114.647 200.68 114.002C200.68 113.916 200.723 113.83 200.723 113.701C200.852 113.013 201.024 112.368 201.196 111.723C201.239 111.594 201.239 111.508 201.282 111.379C201.454 110.863 201.626 110.304 201.841 109.788C201.97 109.53 202.056 109.229 202.142 108.971C202.142 108.928 202.185 108.928 202.185 108.885L202.314 108.584C202.486 108.197 202.615 107.81 202.744 107.423L202.787 107.337C202.83 107.079 202.83 106.649 202.873 106.305C202.916 106.004 202.959 105.789 202.959 105.402C203.174 101.059 202.658 92.287 201.583 83.386C201.583 83.3 201.583 83.214 201.54 83.171C201.368 81.795 201.196 80.419 200.981 79.086C200.895 78.613 200.852 78.097 200.809 77.624C200.594 76.076 200.336 74.614 200.078 73.152C200.035 72.894 199.992 72.636 199.949 72.421C199.734 71.217 199.562 69.884 199.476 68.379C199.132 62.015 200.25 53.114 203.647 43.869C205.84 37.935 208.936 31.872 213.408 26.196C213.451 26.153 213.494 26.11 213.537 26.024C214.741 24.476 216.074 23.014 217.45 21.595C218.224 20.821 219.041 20.047 219.901 19.23C220.546 18.628 221.191 18.026 221.836 17.467C222.997 16.478 224.287 15.446 225.62 14.457C225.964 14.199 226.351 13.941 226.695 13.683C228.286 12.565 229.963 11.49 231.769 10.458C231.984 10.329 232.242 10.2 232.457 10.071C234.349 9.03902 236.37 8.05002 238.52 7.14702C238.821 7.01802 239.122 6.88902 239.423 6.76002C241.487 5.90002 243.723 5.16902 246.002 4.43802C246.518 4.30902 246.991 4.13702 247.507 3.96502C249.743 3.32002 252.151 2.80402 254.602 2.33102C255.204 2.20202 255.763 2.07302 256.408 1.98702C259.504 1.47102 262.686 1.08402 266.126 0.869019H274.081H281.391H281.907C283.799 0.998019 285.476 1.25602 287.239 1.47102C288.873 1.68602 290.636 1.81502 292.184 2.07302C293.775 2.37402 295.237 2.76102 296.699 3.10502C298.161 3.44902 299.666 3.70702 301.042 4.13702C302.504 4.56702 303.794 5.12602 305.17 5.59902C306.374 6.02902 307.664 6.41602 308.825 6.93202C310.158 7.49102 311.362 8.13602 312.609 8.78102C313.598 9.29702 314.673 9.72702 315.619 10.286C316.866 10.974 317.941 11.748 319.102 12.479C319.919 12.995 320.779 13.468 321.51 14.027C322.714 14.887 323.789 15.833 324.907 16.736C325.423 17.166 326.025 17.596 326.541 18.026C327.788 19.144 328.906 20.262 329.981 21.337C330.196 21.595 330.497 21.853 330.755 22.111C332.045 23.487 333.163 24.82 334.195 26.153C347.224 42.794 349.374 62.918 347.654 72.378C347.568 72.765 347.525 73.152 347.482 73.539C347.267 74.786 347.052 76.076 346.837 77.409C346.106 82.44 345.547 87.6 345.16 92.287C345.117 92.545 345.117 92.846 345.074 93.104C344.988 94.265 344.902 95.34 344.859 96.415C344.816 96.931 344.773 97.447 344.773 97.92C344.73 98.909 344.687 99.769 344.687 100.672C344.687 101.102 344.644 101.575 344.644 101.962C344.601 103.166 344.644 104.155 344.644 105.058V105.101C344.687 106.004 344.73 106.735 344.816 107.208C344.816 107.251 344.816 107.294 344.816 107.337V107.38C344.988 107.939 345.16 108.455 345.375 108.971C346.493 111.895 347.267 114.819 347.396 118.646C347.396 118.775 347.396 118.861 347.396 118.947C347.439 119.764 347.439 120.624 347.396 121.527C347.396 122 347.353 122.516 347.31 122.989C347.267 123.634 347.224 124.236 347.181 124.924C347.095 125.741 346.966 126.687 346.837 127.59C346.751 128.063 346.708 128.536 346.665 129.052C346.45 130.557 346.149 132.148 345.805 133.911C342.881 148.445 338.581 156.916 335.012 161.732C334.496 162.42 334.023 163.022 333.55 163.581C332.991 167.967 331.916 172.525 330.669 176.911C330.454 177.642 330.282 178.416 330.067 179.104C329.637 180.48 329.207 181.727 328.734 183.017C328.347 184.092 328.003 185.21 327.659 186.199C326.842 188.349 325.982 190.327 325.208 192.047C324.649 193.294 324.133 194.627 323.703 196.132C323.617 196.39 323.574 196.734 323.531 196.992C323.187 198.239 322.886 199.529 322.628 200.991C322.499 201.636 322.456 202.453 322.413 203.141C322.284 204.302 322.112 205.42 322.026 206.71C321.897 208.774 321.811 210.967 321.811 213.375C321.811 219.266 321.983 221.287 322.671 222.147C322.714 222.19 322.714 222.319 322.714 222.319C322.757 222.362 322.929 222.491 323.23 222.62C323.488 222.749 323.789 222.878 324.133 222.964C325.767 223.437 327.401 223.953 329.164 224.469C339.14 227.522 350.793 231.435 362.188 235.391C362.575 235.52 362.962 235.649 363.349 235.821C364.596 236.294 365.843 236.724 367.09 237.154C367.778 237.412 368.509 237.627 369.197 237.885C370.014 238.186 370.831 238.487 371.648 238.745C372.766 239.132 373.884 239.562 375.002 239.949C375.346 240.078 375.647 240.164 375.991 240.293C377.539 240.852 379.087 241.411 380.549 241.97C380.764 242.056 380.979 242.142 381.194 242.228C388.16 244.808 394.524 247.259 399.641 249.323C402.264 250.398 404.586 251.344 406.521 252.204C407.94 252.806 409.187 253.494 410.348 254.182C410.821 254.483 411.208 254.784 411.638 255.085C412.283 255.515 412.928 255.988 413.487 256.461C413.96 256.848 414.433 257.278 414.863 257.751C415.293 258.181 415.68 258.568 416.067 258.998C416.54 259.514 416.927 260.03 417.314 260.589C417.615 260.976 417.873 261.363 418.131 261.793C418.518 262.395 418.862 263.04 419.163 263.685C419.335 264.072 419.55 264.459 419.679 264.846C419.98 265.534 420.195 266.265 420.453 266.996C420.582 267.383 420.711 267.77 420.797 268.157C421.012 268.931 421.141 269.748 421.27 270.565C421.313 270.952 421.399 271.296 421.442 271.683C421.571 272.844 421.657 274.048 421.657 275.338C421.657 283.508 421.657 307.158 421.657 313.694C421.657 313.909 421.657 314.167 421.657 314.339C421.657 319.843 418.389 329.303 406.521 329.303C406.392 329.303 406.177 329.303 406.048 329.303C395.513 329.303 324.004 329.303 291.281 329.303C281.348 329.303 274.941 329.303 274.941 329.303H272.103C272.103 329.303 265.567 329.303 255.505 329.303C222.696 329.303 151.574 329.303 140.824 329.303C140.652 329.303 140.394 329.303 140.265 329.303C129.214 329.303 125.645 321.133 125.215 315.543V313.737L125.129 275.338C125.129 267.039 130.676 256.461 143.146 251.172Z" fill="#F6F6F6"/>
              <path class="geo-sprite" d="M14.791 234.875C28.594 229.113 61.274 217.761 81.484 211.784C83.204 211.225 83.462 211.139 83.462 203.958C83.462 198.024 81.011 192.047 78.646 187.016C76.066 181.512 73.013 172.31 71.938 164.011C68.885 160.442 64.714 153.433 62.005 140.017C59.64 128.235 60.758 123.935 62.306 119.893C62.478 119.463 62.65 119.033 62.779 118.646C63.381 115.894 62.564 101.489 60.543 90.3521C59.167 82.6981 60.887 66.4441 71.422 52.9421C78.087 44.4281 90.772 33.9791 114.035 32.5601H126.763C149.596 34.0221 162.324 44.4711 168.989 52.9421C179.524 66.4011 181.244 82.6981 179.868 90.3521C177.847 101.532 177.03 115.894 177.632 118.603C177.761 119.076 177.933 119.506 178.105 119.936C179.653 123.978 180.771 128.235 178.406 140.06C175.74 153.433 171.569 160.485 168.473 164.054C167.355 172.353 164.345 181.555 161.765 187.059C159.873 191.058 159.013 196.562 159.013 204.259C159.013 211.44 159.271 211.526 160.905 212.042C167.785 214.063 175.998 216.729 184.34 219.61C165.721 225.931 147.231 232.596 137.04 236.853C118.077 244.98 109.606 262.008 109.606 275.295L109.649 297.999C108.359 297.999 106.983 297.999 105.478 297.999C78.603 297.999 19.908 297.999 12.555 297.999C2.966 297.913 0.300004 290.302 0.300004 285.83C0.300004 281.358 0.300004 261.105 0.300004 254.268C0.257004 247.431 4.987 239.089 14.791 234.875Z" fill="#F6F6F6"/>
            </svg>


            <span class="geo-title">Society</span>

          </div>
        </div>
      </div>

      <div class='point' v-show="activated && statusDefault" ref="point3" @click="$router.push('me')">
        <div class="navigator" style="margin-top : 6px;">
          <img src='../static/account.svg' alt=""/>
        </div>
      </div>

      <div class="absolute navigator-container">
        <div class="navigator" @click="trigger">
          <div class="lines">
            <div class="line" ref="firstLine"></div>
            <div class="line" ref="secondLine" style="top : 10px"></div>
            <div class="line" ref="thirdLine" style="top : 20px"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: "Navigator",
  data() {
    return {
      geoActivated: false,
    }
  },
  computed: {
    activated() {
      return this.$store.state.navigatorActivated
    },
    statusDefault() {
      return this.$store.state.navigatorStatus === 'default'
    }
  },
  watch: {
    '$store.state.navigatorActivated': function (val) {
      if (this.$store.state.navigatorStatus === 'onlyClose') {
        if (val) {
          this.activate()
        } else {
          this.disActivate()
        }
      }
    }
  },
  mounted() {
    this.$refs.point2.addEventListener('mouseover', () => {
      this.geoActivated = true
    })
    this.$refs.point2.addEventListener('mouseout', () => {
      this.geoActivated = false
    })

    const getParts = document.querySelectorAll('.geo-part')

    for (let part of getParts) {
      const sprite = part.getElementsByTagName('path')[0]
      const sprite2 = part.getElementsByTagName('path')[1]


      part.addEventListener('mouseover', () => {
        sprite.style.fill = '#f6f6f6'

        if (sprite2) {
          sprite2.style.fill = '#f6f6f6'
        }
      })
      part.addEventListener('mouseout', () => {
        sprite.style.fill = '#b2b2b2'

        if (sprite2) {
          sprite2.style.fill = '#b2b2b2'
        }
      })
    }

  },
  methods: {
    changeState() {
      this.$store.commit('changeNavigatorState');
    },
    changeStatus(status) {
      this.$store.commit('changeNavigatorStatus', status)
    },
    trigger() {
      if (this.$store.state.navigatorStatus === 'default') {
        if (!this.activated) {
          this.activate()
        } else {
          this.disActivate()
        }
      }
    },
    activate() {
      const firstLine = this.$refs.firstLine
      const secondLine = this.$refs.secondLine
      const thirdLine = this.$refs.thirdLine

      firstLine.style.transform = 'translateY(10px)'
      thirdLine.style.transform = 'translateY(-10px)'

      this.showPoints()

      setTimeout(() => {
        firstLine.style.transform = 'translateY(10px) rotate(-45deg)'
        secondLine.style.transform = 'rotate(45deg)'
        thirdLine.style.transform = 'translateY(-10px) rotate(45deg)'
      }, 500)
    },
    disActivate() {
      const firstLine = this.$refs.firstLine
      const secondLine = this.$refs.secondLine
      const thirdLine = this.$refs.thirdLine

      firstLine.style.transform = 'translateY(10px)'
      secondLine.style.transform = ''
      thirdLine.style.transform = 'translateY(-10px)'

      this.showPoints()

      setTimeout(() => {
        firstLine.style.transform = ''
        thirdLine.style.transform = ''
        this.changeState()
      }, 500)
    },
    showPoints() {
      if (!this.activated) {
        this.changeState()

        setTimeout(() => {
          this.$refs.point1.style.transform = 'translateY(-120px)'
          this.$refs.point2.style.transform = 'translateY(-220px)'
          this.$refs.point3.style.transform = 'translateY(-320px)'
        }, 0)
      } else {
        this.$refs.point1.style.transform = 'translateY(0px)'
        this.$refs.point2.style.transform = 'translateY(0px)'
        this.$refs.point3.style.transform = 'translateY(0px)'

        this.changeStatus('default')
      }
    }
  }
}
</script>

<style scoped>

.geo-svg {
  top: 8px;
  margin-left: 15px;
  @apply inline-block relative;
}

.geo-sprite {
  fill: #b2b2b2;
  @apply inline-block;
}

.geo-part {
  height: 48px;
  width: 200px;
  background: #f6f6f6;
  color: #b2b2b2;
  transform: translateY(-54px) translateX(120px);
  @apply absolute;
}

.geo-part:hover {
  background: #eaa500;
  color: white;
}

.geo-title {
  left: 18px;
  top: 10px;
  font-family: 'Exo', sans-serif;
  @apply inline-block relative;
}

.triangle {
  width: 10px;
  border: 15px solid transparent;
  border-right: 30px solid #eaa500;
  top: 9px;
  transform: translateX(-45px);
  @apply absolute;
}

.geo-part img {
  height: 30px;
  left: 15px;
  top: 9px;
  @apply inline-block relative;
}

.line {
  background: white;
  border-radius: 10px;
  height: 5px;
  width: 40px;
  transition: all .5s ease;
  @apply absolute mx-auto my-1;
}

.lines {
  top: 4px;
  @apply relative;
}

.point {
  left: 10px;
  margin-top: 17px !important;
  transition: all .5s ease;
  border-radius: 100%;
  border-style: solid;
  border-color: transparent;
  border-width: 4px;
  bottom: 12px;
  width: 80px;
  height: 80px;
  @apply absolute cursor-pointer;
}

.point:hover {
  border-color: #eaa500;
  transition: all .5s ease;
}

.container_ {
  width: 100px;
  height: 100px;
  border-radius: 100%;
  margin-top: -25px;
  bottom: 30px;
  background: #f6f6f6;

  @apply relative mx-auto;
}

.navigator-container {
  width: 75px;
  height: 75px;
  border-radius: 100%;
  border: 4px solid #eaa500;
  top: 10px;
  @apply relative mx-auto cursor-pointer;
}


.navigator {
  border-radius: 100%;
  height: 60px;
  width: 60px;
  background: #eaa500;
  border: 10px solid transparent;
  margin-top: 3.5px;
  transition: all .5s ease;
  @apply mx-auto;
}


</style>
